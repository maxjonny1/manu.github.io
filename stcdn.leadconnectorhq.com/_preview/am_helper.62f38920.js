import{P as d,A as o}from"./entry.28a6fb2e.js";const u=()=>{var i,a;const e={version:"2021-04-15"},t=(a=(i=Intl==null?void 0:Intl.DateTimeFormat())==null?void 0:i.resolvedOptions())==null?void 0:a.timeZone;return t&&(e.timezone=t),e},g=e=>{const t=d();return $fetch.create({baseURL:e||t.public.REST_API_URLS,headers:u()})},v={ValidateAffiliateCampaign:e=>g()("/affiliate-manager/affiliate-campaign/validate",{body:e,method:"POST"})},p="am_fingerprint",A="am_id",_="sam_id",y=async(e,t,i,a)=>{try{let n="";n=window.location.href;const m={locationId:e,funnelId:t,amId:i,samId:a,fingerprint:o(p).value||"",accessUrl:n},s=await v.ValidateAffiliateCampaign(m);if(s.valid&&s.fingerprint&&s.timestamp){const{fingerprint:f,timestamp:r}=s,l=o(p,{expires:new Date(r),path:"/",samesite:"none"});if(i){const c=o(A,{expires:new Date(r),path:"/",samesite:"none"});l.value=f,c.value=i}else if(a){const c=o(_,{expires:new Date(r),path:"/",samesite:"none"});l.value=f,c.value=a}}}catch(n){console.error("Failed to add affiliate cookie!",n)}};export{y as s};
